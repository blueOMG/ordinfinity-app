import{c as R,b as P,d as r,B as m,P as x,k as h}from"./tsparticles-engine.e4b9023d.js";function u(e,i,o,t,n,s){const d=R(e.options.collisions.absorb.speed*n.factor/10,0,t);e.size.value+=d/2,o.size.value-=d,t<=s&&(o.size.value=0,o.destroy())}function M(e,i,o,t){const n=e.getRadius(),s=i.getRadius();n===void 0&&s!==void 0?e.destroy():n!==void 0&&s===void 0?i.destroy():n!==void 0&&s!==void 0&&(n>=s?u(e,n,i,s,o,t):u(i,s,e,n,o,t))}const f=e=>{e.collisionMaxSpeed===void 0&&(e.collisionMaxSpeed=m(e.options.collisions.maxSpeed)),e.velocity.length>e.collisionMaxSpeed&&(e.velocity.length=e.collisionMaxSpeed)};function b(e,i){P(r(e),r(i)),f(e),f(i)}function k(e,i){!e.unbreakable&&!i.unbreakable&&b(e,i),e.getRadius()===void 0&&i.getRadius()!==void 0?e.destroy():e.getRadius()!==void 0&&i.getRadius()===void 0?i.destroy():e.getRadius()!==void 0&&i.getRadius()!==void 0&&(e.getRadius()>=i.getRadius()?i:e).destroy()}function v(e,i,o,t){switch(e.options.collisions.mode){case"absorb":{M(e,i,o,t);break}case"bounce":{b(e,i);break}case"destroy":{k(e,i);break}}}class S extends x{constructor(i){super(i)}clear(){}init(){}async interact(i,o){if(i.destroyed||i.spawning)return;const t=this.container,n=i.getPosition(),s=i.getRadius(),d=t.particles.quadTree.queryCircle(n,s*2);for(const a of d){if(i===a||!a.options.collisions.enable||i.options.collisions.mode!==a.options.collisions.mode||a.destroyed||a.spawning)continue;const c=a.getPosition(),l=a.getRadius();if(Math.abs(Math.round(n.z)-Math.round(c.z))>s+l)continue;const g=h(n,c),y=s+l;g>y||v(i,a,o,t.retina.pixelRatio)}}isEnabled(i){return i.options.collisions.enable}reset(){}}async function z(e){await e.addInteractor("particlesCollisions",i=>new S(i))}export{z as l};
