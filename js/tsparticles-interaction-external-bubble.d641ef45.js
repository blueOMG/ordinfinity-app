import{j as O,O as E,c as z,E as _,k as C,l as y,m as B,n as k,o as R,p as D,q as S,s as j,C as q,R as H,u as P,i as m,f as T,h as w}from"./tsparticles-engine.e4b9023d.js";class M{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(i){if(i){if(i.distance!==void 0&&(this.distance=i.distance),i.duration!==void 0&&(this.duration=i.duration),i.mix!==void 0&&(this.mix=i.mix),i.opacity!==void 0&&(this.opacity=i.opacity),i.color!==void 0){const e=this.color instanceof Array?void 0:this.color;this.color=O(i.color,o=>E.create(e,o))}i.size!==void 0&&(this.size=i.size)}}}class I extends M{constructor(){super(),this.selectors=[]}get ids(){return O(this.selectors,i=>i.replace("#",""))}set ids(i){this.selectors=O(i,e=>`#${e}`)}load(i){super.load(i),i&&(i.ids!==void 0&&(this.ids=i.ids),i.selectors!==void 0&&(this.selectors=i.selectors))}}class A extends M{load(i){super.load(i),i&&(this.divs=O(i.divs,e=>{const o=new I;return o.load(e),o}))}}function x(d,i,e,o){if(i>=e){const s=d+(i-e)*o;return z(s,d,i)}else if(i<e){const s=d-(e-i)*o;return z(s,i,d)}}class L extends _{constructor(i){super(i),this._clickBubble=()=>{var n;const e=this.container,o=e.actualOptions,s=e.interactivity.mouse.clickPosition,b=o.interactivity.modes.bubble;if(!b||!s)return;e.bubble||(e.bubble={});const t=e.retina.bubbleModeDistance;if(!t||t<0)return;const u=e.particles.quadTree.queryCircle(s,t,l=>this.isEnabled(l)),{bubble:r}=e;for(const l of u){if(!r.clicking)continue;l.bubble.inRange=!r.durationEnd;const a=l.getPosition(),f=C(a,s),p=(new Date().getTime()-(e.interactivity.mouse.clickTime||0))/1e3;p>b.duration&&(r.durationEnd=!0),p>b.duration*2&&(r.clicking=!1,r.durationEnd=!1);const h={bubbleObj:{optValue:e.retina.bubbleModeSize,value:l.bubble.radius},particlesObj:{optValue:y(l.options.size.value)*e.retina.pixelRatio,value:l.size.value},type:"size"};this._process(l,f,p,h);const c={bubbleObj:{optValue:b.opacity,value:l.bubble.opacity},particlesObj:{optValue:y(l.options.opacity.value),value:((n=l.opacity)==null?void 0:n.value)??1},type:"opacity"};this._process(l,f,p,c),!r.durationEnd&&f<=t?this._hoverBubbleColor(l,f):delete l.bubble.color}},this._hoverBubble=()=>{const e=this.container,o=e.interactivity.mouse.position,s=e.retina.bubbleModeDistance;if(!s||s<0||o===void 0)return;const b=e.particles.quadTree.queryCircle(o,s,t=>this.isEnabled(t));for(const t of b){t.bubble.inRange=!0;const u=t.getPosition(),r=C(u,o),n=1-r/s;r<=s?n>=0&&e.interactivity.status===B&&(this._hoverBubbleSize(t,n),this._hoverBubbleOpacity(t,n),this._hoverBubbleColor(t,n)):this.reset(t),e.interactivity.status===k&&this.reset(t)}},this._hoverBubbleColor=(e,o,s)=>{const b=this.container.actualOptions,t=s??b.interactivity.modes.bubble;if(t){if(!e.bubble.finalColor){const u=t.color;if(!u)return;const r=R(u);e.bubble.finalColor=D(r)}if(e.bubble.finalColor)if(t.mix){e.bubble.color=void 0;const u=e.getFillColor();e.bubble.color=u?S(j(u,e.bubble.finalColor,1-o,o)):e.bubble.finalColor}else e.bubble.color=e.bubble.finalColor}},this._hoverBubbleOpacity=(e,o,s)=>{var a,f;const b=this.container,t=b.actualOptions,u=(s==null?void 0:s.opacity)??((a=t.interactivity.modes.bubble)==null?void 0:a.opacity);if(!u)return;const r=e.options.opacity.value,n=((f=e.opacity)==null?void 0:f.value)??1,l=x(n,u,y(r),o);l!==void 0&&(e.bubble.opacity=l)},this._hoverBubbleSize=(e,o,s)=>{const b=this.container,t=s!=null&&s.size?s.size*b.retina.pixelRatio:b.retina.bubbleModeSize;if(t===void 0)return;const u=y(e.options.size.value)*b.retina.pixelRatio,r=e.size.value,n=x(r,t,u,o);n!==void 0&&(e.bubble.radius=n)},this._process=(e,o,s,b)=>{const t=this.container,u=b.bubbleObj.optValue,r=t.actualOptions,n=r.interactivity.modes.bubble;if(!n||u===void 0)return;const l=n.duration,a=t.retina.bubbleModeDistance,f=b.particlesObj.optValue,p=b.bubbleObj.value,h=b.particlesObj.value||0,c=b.type;if(!(!a||a<0||u===f))if(t.bubble||(t.bubble={}),t.bubble.durationEnd)p&&(c==="size"&&delete e.bubble.radius,c==="opacity"&&delete e.bubble.opacity);else if(o<=a){if((p??h)!==u){const v=h-s*(h-u)/l;c==="size"&&(e.bubble.radius=v),c==="opacity"&&(e.bubble.opacity=v)}}else c==="size"&&delete e.bubble.radius,c==="opacity"&&delete e.bubble.opacity},this._singleSelectorHover=(e,o,s)=>{const b=this.container,t=document.querySelectorAll(o),u=b.actualOptions.interactivity.modes.bubble;!u||!t.length||t.forEach(r=>{const n=r,l=b.retina.pixelRatio,a={x:(n.offsetLeft+n.offsetWidth/2)*l,y:(n.offsetTop+n.offsetHeight/2)*l},f=n.offsetWidth/2*l,p=s.type==="circle"?new q(a.x,a.y,f):new H(n.offsetLeft*l,n.offsetTop*l,n.offsetWidth*l,n.offsetHeight*l),h=b.particles.quadTree.query(p,c=>this.isEnabled(c));for(const c of h){if(!p.contains(c.getPosition()))continue;c.bubble.inRange=!0;const g=u.divs,v=P(g,n);(!c.bubble.div||c.bubble.div!==n)&&(this.clear(c,e,!0),c.bubble.div=n),this._hoverBubbleSize(c,1,v),this._hoverBubbleOpacity(c,1,v),this._hoverBubbleColor(c,1,v)}})},i.bubble||(i.bubble={}),this.handleClickMode=e=>{e==="bubble"&&(i.bubble||(i.bubble={}),i.bubble.clicking=!0)}}clear(i,e,o){i.bubble.inRange&&!o||(delete i.bubble.div,delete i.bubble.opacity,delete i.bubble.radius,delete i.bubble.color)}init(){const i=this.container,e=i.actualOptions.interactivity.modes.bubble;e&&(i.retina.bubbleModeDistance=e.distance*i.retina.pixelRatio,e.size!==void 0&&(i.retina.bubbleModeSize=e.size*i.retina.pixelRatio))}async interact(i){const e=this.container.actualOptions,o=e.interactivity.events,s=o.onHover,b=o.onClick,t=s.enable,u=s.mode,r=b.enable,n=b.mode,l=o.onDiv;t&&m("bubble",u)?this._hoverBubble():r&&m("bubble",n)?this._clickBubble():T("bubble",l,(a,f)=>this._singleSelectorHover(i,a,f))}isEnabled(i){const e=this.container,o=e.actualOptions,s=e.interactivity.mouse,b=((i==null?void 0:i.interactivity)??o.interactivity).events,{onClick:t,onDiv:u,onHover:r}=b,n=w("bubble",u);return n||r.enable&&s.position||t.enable&&s.clickPosition?m("bubble",r.mode)||m("bubble",t.mode)||n:!1}loadModeOptions(i,...e){i.bubble||(i.bubble=new A);for(const o of e)i.bubble.load(o==null?void 0:o.bubble)}reset(i){i.bubble.inRange=!1}}async function F(d){await d.addInteractor("externalBubble",i=>new L(i))}export{F as l};
