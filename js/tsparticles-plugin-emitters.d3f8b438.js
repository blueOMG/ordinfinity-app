import{I as w,A as P,j as S,F as E,Q as M,L as I,B as v,o as R,S as A,p as O,N as b,V as q,T as F,D as T,i as k}from"./tsparticles-engine.e4b9023d.js";class B{randomPosition(t,e,i){const s=(f,d)=>{const c=w()/4,m=Math.atan(d/f*Math.tan(2*Math.PI*c)),p=w();return p<.25?m:p<.5?Math.PI-m:p<.75?Math.PI+m:-m},h=(f,d,c)=>f*d/Math.sqrt((d*Math.cos(c))**2+(f*Math.sin(c))**2),[r,n]=[e.width/2,e.height/2],l=s(r,n),o=h(r,n,l),u=i?o*Math.sqrt(w()):o;return{x:t.x+u*Math.cos(l),y:t.y+u*Math.sin(l)}}}class L{constructor(){this.wait=!1}load(t){t&&(t.count!==void 0&&(this.count=t.count),t.delay!==void 0&&(this.delay=t.delay),t.duration!==void 0&&(this.duration=t.duration),t.wait!==void 0&&(this.wait=t.wait))}}class V{constructor(){this.quantity=1,this.delay=.1}load(t){t!==void 0&&(t.quantity!==void 0&&(this.quantity=P(t.quantity)),t.delay!==void 0&&(this.delay=P(t.delay)))}}class x{constructor(){this.mode="percent",this.height=0,this.width=0}load(t){t!==void 0&&(t.mode!==void 0&&(this.mode=t.mode),t.height!==void 0&&(this.height=t.height),t.width!==void 0&&(this.width=t.width))}}class y{constructor(){this.autoPlay=!0,this.fill=!0,this.life=new L,this.rate=new V,this.shape="square",this.startCount=0}load(t){t&&(t.autoPlay!==void 0&&(this.autoPlay=t.autoPlay),t.size!==void 0&&(this.size||(this.size=new x),this.size.load(t.size)),t.direction!==void 0&&(this.direction=t.direction),this.domId=t.domId,t.fill!==void 0&&(this.fill=t.fill),this.life.load(t.life),this.name=t.name,this.particles=S(t.particles,e=>E({},e)),this.rate.load(t.rate),t.shape!==void 0&&(this.shape=t.shape),t.position!==void 0&&(this.position={},t.position.x!==void 0&&(this.position.x=P(t.position.x)),t.position.y!==void 0&&(this.position.y=P(t.position.y))),t.spawnColor!==void 0&&(this.spawnColor===void 0&&(this.spawnColor=new M),this.spawnColor.load(t.spawnColor)),t.startCount!==void 0&&(this.startCount=t.startCount))}}class H{constructor(t,e,i,s,h){var n,l;this.emitters=e,this.container=i,this._calcPosition=()=>I({size:this.container.canvas.size,position:this.options.position}),this._destroy=()=>{this.emitters.removeEmitter(this),this._engine.dispatchEvent("emitterDestroyed",{container:this.container,data:{emitter:this}})},this._emit=()=>{if(this._paused)return;const o=v(this.options.rate.quantity);this._emitParticles(o)},this._emitParticles=o=>{var c,m;const u=this.getPosition(),f=this.getSize(),d=R(this._particlesOptions);for(let p=0;p<o;p++){const _=E({},d);if(this.spawnColor){const g=(c=this.options.spawnColor)==null?void 0:c.animation;g&&(this.spawnColor.h=this._setColorAnimation(g.h,this.spawnColor.h,360),this.spawnColor.s=this._setColorAnimation(g.s,this.spawnColor.s,100),this.spawnColor.l=this._setColorAnimation(g.l,this.spawnColor.l,100)),_.color?_.color.value=this.spawnColor:_.color={value:this.spawnColor}}if(!u)return;const z=((m=this._shape)==null?void 0:m.randomPosition(u,f,this.fill))??u;this.container.particles.addParticle(z,_)}},this._prepareToDie=()=>{var u;if(this._paused)return;const o=(u=this.options.life)==null?void 0:u.duration;this.container.retina.reduceFactor&&(this._lifeCount>0||this._immortal)&&o!==void 0&&o>0&&(this._duration=o*1e3)},this._setColorAnimation=(o,u,f)=>{const d=this.container;if(!o.enable)return u;const c=A(o.offset),m=v(this.options.rate.delay),p=1e3*m/d.retina.reduceFactor,_=v(o.speed??0);return(u+_*d.fpsLimit/p+c*3.6)%f},this._engine=t,this._currentDuration=0,this._currentEmitDelay=0,this._currentSpawnDelay=0,this._initialPosition=h,s instanceof y?this.options=s:(this.options=new y,this.options.load(s)),this._spawnDelay=(this.options.life.delay??0)*1e3/this.container.retina.reduceFactor,this.position=this._initialPosition??this._calcPosition(),this.name=this.options.name,this._shape=(n=this._engine.emitterShapeManager)==null?void 0:n.getShape(this.options.shape),console.log(this.options.shape,this._shape),this.fill=this.options.fill,this._firstSpawn=!this.options.life.wait,this._startParticlesAdded=!1;let r=E({},this.options.particles);r??(r={}),r.move??(r.move={}),(l=r.move).direction??(l.direction=this.options.direction),this.options.spawnColor&&(this.spawnColor=O(this.options.spawnColor)),this._paused=!this.options.autoPlay,this._particlesOptions=r,this.size=this.options.size??(()=>{const o=new x;return o.load({height:0,mode:"percent",width:0}),o})(),this._lifeCount=this.options.life.count??-1,this._immortal=this._lifeCount<=0,this._engine.dispatchEvent("emitterCreated",{container:i,data:{emitter:this}}),this.play()}externalPause(){this._paused=!0,this.pause()}externalPlay(){this._paused=!1,this.play()}getPosition(){if(this.options.domId){const t=this.container,e=document.getElementById(this.options.domId);if(e){const i=e.getBoundingClientRect();return{x:(i.x+i.width/2)*t.retina.pixelRatio,y:(i.y+i.height/2)*t.retina.pixelRatio}}}return this.position}getSize(){const t=this.container;if(this.options.domId){const e=document.getElementById(this.options.domId);if(e){const i=e.getBoundingClientRect();return{width:i.width*t.retina.pixelRatio,height:i.height*t.retina.pixelRatio}}}return{width:this.size.mode==="percent"?t.canvas.size.width*this.size.width/100:this.size.width,height:this.size.mode==="percent"?t.canvas.size.height*this.size.height/100:this.size.height}}pause(){this._paused||delete this._emitDelay}play(){if(!this._paused&&this.container.retina.reduceFactor&&(this._lifeCount>0||this._immortal||!this.options.life.count)&&(this._firstSpawn||this._currentSpawnDelay>=(this._spawnDelay??0))){if(this._emitDelay===void 0){const t=v(this.options.rate.delay);this._emitDelay=1e3*t/this.container.retina.reduceFactor}(this._lifeCount>0||this._immortal)&&this._prepareToDie()}}resize(){const t=this._initialPosition;this.position=t&&b(t,this.container.canvas.size,q.origin)?t:this._calcPosition()}update(t){this._paused||(this._firstSpawn&&(this._firstSpawn=!1,this._currentSpawnDelay=this._spawnDelay??0,this._currentEmitDelay=this._emitDelay??0),this._startParticlesAdded||(this._startParticlesAdded=!0,this._emitParticles(this.options.startCount)),this._duration!==void 0&&(this._currentDuration+=t.value,this._currentDuration>=this._duration&&(this.pause(),this._spawnDelay!==void 0&&delete this._spawnDelay,this._immortal||this._lifeCount--,this._lifeCount>0||this._immortal?(this.position=this._calcPosition(),this._spawnDelay=(this.options.life.delay??0)*1e3/this.container.retina.reduceFactor):this._destroy(),this._currentDuration-=this._duration,delete this._duration)),this._spawnDelay!==void 0&&(this._currentSpawnDelay+=t.value,this._currentSpawnDelay>=this._spawnDelay&&(this._engine.dispatchEvent("emitterPlay",{container:this.container}),this.play(),this._currentSpawnDelay-=this._currentSpawnDelay,delete this._spawnDelay)),this._emitDelay!==void 0&&(this._currentEmitDelay+=t.value,this._currentEmitDelay>=this._emitDelay&&(this._emit(),this._currentEmitDelay-=this._emitDelay)))}}class j{constructor(t,e){this.container=e,this._engine=t,this.array=[],this.emitters=[],this.interactivityEmitters={random:{count:1,enable:!1},value:[]},e.getEmitter=i=>i===void 0||typeof i=="number"?this.array[i||0]:this.array.find(s=>s.name===i),e.addEmitter=(i,s)=>this.addEmitter(i,s),e.removeEmitter=i=>{const s=e.getEmitter(i);s&&this.removeEmitter(s)},e.playEmitter=i=>{const s=e.getEmitter(i);s&&s.externalPlay()},e.pauseEmitter=i=>{const s=e.getEmitter(i);s&&s.externalPause()}}addEmitter(t,e){const i=new y;i.load(t);const s=new H(this._engine,this,this.container,i,e);return this.array.push(s),s}handleClickMode(t){const e=this.emitters,i=this.interactivityEmitters;if(t!=="emitter")return;let s;if(i&&i.value instanceof Array)if(i.value.length>0&&i.random.enable){s=[];const n=[];for(let l=0;l<i.random.count;l++){const o=F(i.value);if(n.includes(o)&&n.length<i.value.length){l--;continue}n.push(o),s.push(T(i.value,o))}}else s=i.value;else s=i==null?void 0:i.value;const h=s??e,r=this.container.interactivity.mouse.clickPosition;S(h,n=>{this.addEmitter(n,r)})}async init(){if(this.emitters=this.container.actualOptions.emitters,this.interactivityEmitters=this.container.actualOptions.interactivity.modes.emitters,!!this.emitters)if(this.emitters instanceof Array)for(const t of this.emitters)this.addEmitter(t);else this.addEmitter(this.emitters)}pause(){for(const t of this.array)t.pause()}play(){for(const t of this.array)t.play()}removeEmitter(t){const e=this.array.indexOf(t);e>=0&&this.array.splice(e,1)}resize(){for(const t of this.array)t.resize()}stop(){this.array=[]}update(t){for(const e of this.array)e.update(t)}}const C=new Map;class Q{constructor(t){this._engine=t}addShape(t,e){this.getShape(t)||C.set(t,e)}getShape(t){return C.get(t)}getSupportedShapes(){return C.keys()}}function D(a,t){return a+t*(w()-.5)}class W{randomPosition(t,e,i){if(i)return{x:D(t.x,e.width),y:D(t.y,e.height)};{const s=e.width/2,h=e.height/2,r=Math.floor(w()*4),n=(w()-.5)*2;switch(r){case 0:return{x:t.x+n*s,y:t.y-h};case 1:return{x:t.x-s,y:t.y+n*h};case 2:return{x:t.x+n*s,y:t.y+h};case 3:default:return{x:t.x+s,y:t.y+n*h}}}}}class G{constructor(t){this._engine=t,this.id="emitters"}getPlugin(t){return new j(this._engine,t)}loadOptions(t,e){var s,h;if(!this.needsPlugin(t)&&!this.needsPlugin(e))return;e!=null&&e.emitters&&(t.emitters=S(e.emitters,r=>{const n=new y;return n.load(r),n}));const i=(h=(s=e==null?void 0:e.interactivity)==null?void 0:s.modes)==null?void 0:h.emitters;if(i)if(i instanceof Array)t.interactivity.modes.emitters={random:{count:1,enable:!0},value:i.map(r=>{const n=new y;return n.load(r),n})};else{const r=i;if(r.value!==void 0)if(r.value instanceof Array)t.interactivity.modes.emitters={random:{count:r.random.count??1,enable:r.random.enable??!1},value:r.value.map(n=>{const l=new y;return l.load(n),l})};else{const n=new y;n.load(r.value),t.interactivity.modes.emitters={random:{count:r.random.count??1,enable:r.random.enable??!1},value:n}}else(t.interactivity.modes.emitters={random:{count:1,enable:!1},value:new y}).value.load(i)}}needsPlugin(t){var i,s,h;if(!t)return!1;const e=t.emitters;return e instanceof Array&&!!e.length||e!==void 0||!!((h=(s=(i=t.interactivity)==null?void 0:i.events)==null?void 0:s.onClick)!=null&&h.mode)&&k("emitter",t.interactivity.events.onClick.mode)}}async function K(a){a.emitterShapeManager||(a.emitterShapeManager=new Q(a)),a.addEmitterShape||(a.addEmitterShape=(e,i)=>{var s;(s=a.emitterShapeManager)==null||s.addShape(e,i)});const t=new G(a);await a.addPlugin(t),a.addEmitterShape("circle",new B),a.addEmitterShape("square",new W)}export{K as l};
